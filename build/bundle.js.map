{"version":3,"sources":["../src/bundle.ts"],"names":[],"mappings":";;AAAA,oCAAmC;AAGnC,MAAM,SAAS,GAAG,CAAC,QAAgB;IAClC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAA;AACzB,CAAC,CAAA;AAED;IAoBC;;;;;;;;;;OAUG;IACH,YAAmB,SAAgC,EAC/B,UAAkB,EAClB,YAAoB,EACpB,OAA2C,SAAS;QACvE,IAAI,CAAC,SAAS,GAAG,SAAS,CAAA;QAC1B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAA;QAC5B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;QAChC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAA;IAC3B,CAAC;IAEM,kBAAkB,CAAC,QAAgB;QACzC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAA;IACrC,CAAC;CAED;AA7CD,yBA6CC","file":"bundle.js","sourcesContent":["import * as Promise from 'bluebird'\nimport * as _ from 'lodash'\n\nconst emptyHook = (contents: string): Promise<void> => {\n\treturn Promise.resolve()\n}\n\nexport default class Bundle {\n\tpublic tarStream: NodeJS.ReadableStream\n\n\t/**\n\t * deviceType: The slug of the device type that this bundle has been created\n\t * for\n\t */\n\tpublic deviceType: string\n\n\t/**\n\t * architecture: The architecture that this resin bundle is targeting\n\t */\n\tpublic architecture: string\n\n\t/**\n\t * dockerfileHook: A function to be called with the resolved dockerfile\n\t * Note: The resolver will wait until the promise resolves before continuing\n\t */\n\tprivate dockerfileHook: (content: string) => Promise<void>\n\n\t/**\n\t * constructor: Initialise a resin-bundle with a tar archive stream\n\t *\n\t * @param tarStream\n\t *\tA readable stream which when consumed will produce a tar archive containing\n\t *\ta resin bundle\n\t * @param deviceType\n\t *  The machine name of the device that this resin bundle is currently targeting\n\t * @param architecture\n\t *  The architecture that this resin bundle is currently targeting\n\t */\n\tpublic constructor(tarStream: NodeJS.ReadableStream,\n                     deviceType: string,\n                     architecture: string,\n                     hook: (content: string) => Promise<void> = emptyHook) {\n\t\tthis.tarStream = tarStream\n\t\tthis.deviceType = deviceType\n\t\tthis.architecture = architecture\n\t\tthis.dockerfileHook = hook\n\t}\n\n\tpublic callDockerfileHook(contents: string): Promise<void> {\n\t\treturn this.dockerfileHook(contents)\n\t}\n\n}\n"],"sourceRoot":"src"}